{"version":3,"file":"accordion3.js","sources":["../src/accordion3.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Chassis - CSS accordion.js\n * Licensed under MIT (https://github.com/ozgurgunes/chassis-css/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\n// import EventHandler from './dom/event-handler.js'\n// import SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\nconst NAME = 'accordion'\n// const DATA_KEY = 'cx.accordion'\n// const EVENT_KEY = `.${DATA_KEY}`\n// const DATA_API_KEY = '.data-api'\n\n// const EVENT_OPEN = `open${EVENT_KEY}`\n// const EVENT_OPENED = `opened${EVENT_KEY}`\n// const EVENT_CLOSE = `close${EVENT_KEY}`\n// const EVENT_CLOSED = `closed${EVENT_KEY}`\n// const EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\n// const CLASS_NAME_OPEN = 'open'\n// const CLASS_NAME_CLOSE = 'collapse'\n// const CLASS_NAME_CLOSING = 'collapsing'\n// const CLASS_NAME_CLOSED = 'collapsed'\n// const CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_CLOSE} .${CLASS_NAME_CLOSING}`\n// const CLASS_NAME_HORIZONTAL = 'collapse-horizontal'\n\n// const SELECTOR_ACTIVES = '.open, .closing'\n\nclass Accordion extends BaseComponent {\n  static get NAME() {\n    return NAME\n  }\n\n  constructor(element, config) {\n    super(element, config)\n    // Store the <details> element\n    // Store the <summary> element\n    this._summary = element.querySelector('summary')\n    // Store the <div class=\"content\"> element\n    this._content = element.querySelector('.accordion-content')\n    // Store if the element is closing\n    this._isOpening = false\n    // Store if the element is expanding\n    this._isClosing = false\n    // Detect user clicks on the summary element\n    this._summary.addEventListener('click', e => this.onClick(e))\n    this._isStatic = this._element.parentElement.classList.contains('static')\n  }\n\n  onClick(e) {\n    // Stop default behaviour from the browser\n    e.preventDefault()\n    // Add an overflow on the <details> to avoid content overflowing\n    this._element.style.overflow = 'hidden'\n    // reflow(this._element)\n    // Check if the element is being closed or is already closed\n    // console.log(this._element.open) // eslint-disable-line no-console\n    if (this._isClosing || !this._element.open) {\n      // Collapse other elements\n      this._openItems = this._element.parentElement.querySelectorAll('details[open]')\n      if (!this._isStatic && this._openItems) {\n        for (const e of this._openItems) {\n          const item = new Accordion(e)\n          if (item._element !== this._element) {\n            item._element.style.overflow = 'hidden'\n            item.close()\n          }\n        }\n      }\n      // this.mode = this._element.querySelector('data-cx-accordion')\n\n      // Store open elements\n      this.open()\n      // Check if the element is being openned or is already open\n    } else if (this._isOpening || this._element.open) {\n      this.close()\n    }\n  }\n\n  open() {\n    if (this._isOpening || this._element.open) {\n      return\n    }\n\n    // this._element.open = true\n\n    // EventHandler.trigger(this._element, EVENT_OPEN)\n    // if (startEvent.defaultPrevented) {\n    //   return\n    // }\n\n    // this._element.classList.add(CLASS_NAME_CLOSING)\n\n    this._element.style.height = `${this._element.offsetHeight}px`\n\n    // reflow(this._element)\n    this._isOpening = true\n\n    const complete = () => {\n      this._element.open = true\n      this._isOpening = false\n      // this._element.classList.remove(CLASS_NAME_CLOSING)\n      this._element.style.overflow = ''\n      this._element.style.height = ''\n      // EventHandler.trigger(this._element, EVENT_OPENED)\n    }\n\n    this._element.style.height = `${this._summary.offsetHeight + this._content.offsetHeight}px`\n    this._queueCallback(complete, this._element, true)\n  }\n\n  close() {\n    if (this._isClosing || !this._element.open) {\n      return\n    }\n\n    // EventHandler.trigger(this._element, EVENT_CLOSE)\n    // if (startEvent.defaultPrevented) {\n    //   return\n    // }\n\n    this._element.style.height = `${this._element.offsetHeight}px`\n\n    // reflow(this._element)\n\n    // this._element.classList.add(CLASS_NAME_CLOSING)\n    this._isClosing = true\n\n    const complete = () => {\n      this._isClosing = false\n      // this._element.classList.remove(CLASS_NAME_CLOSING)\n      this._element.open = false\n      this._element.style.overflow = ''\n      this._element.style.height = ''\n      // EventHandler.trigger(this._element, EVENT_CLOSED)\n    }\n\n    this._element.style.height = `${this._summary.offsetHeight}px`\n    this._queueCallback(complete, this._element, true)\n  }\n}\n\nfor (const element of document.querySelectorAll('.accordion > details')) {\n  // eslint-disable-next-line no-new\n  new Accordion(element)\n}\n\ndefineJQueryPlugin(Accordion)\n\nexport default Accordion\n"],"names":["NAME","Accordion","BaseComponent","constructor","element","config","_summary","querySelector","_content","_isOpening","_isClosing","addEventListener","e","onClick","_isStatic","_element","parentElement","classList","contains","preventDefault","style","overflow","open","_openItems","querySelectorAll","item","close","height","offsetHeight","complete","_queueCallback","document","defineJQueryPlugin"],"mappings":"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"}