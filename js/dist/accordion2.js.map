{"version":3,"file":"accordion2.js","sources":["../src/accordion2.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Chassis - CSS accordion.js\n * Licensed under MIT (https://github.com/ozgurgunes/chassis-css/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\n// import EventHandler from './dom/event-handler.js'\n// import SelectorEngine from './dom/selector-engine.js'\n\nconst NAME = 'accordion'\n// const DATA_KEY = 'cx.accordion'\n// const EVENT_KEY = `.${DATA_KEY}`\n// const DATA_API_KEY = '.data-api'\n\n// const EVENT_OPEN = `open${EVENT_KEY}`\n// const EVENT_OPENED = `opened${EVENT_KEY}`\n// const EVENT_CLOSE = `close${EVENT_KEY}`\n// const EVENT_CLOSED = `closed${EVENT_KEY}`\n// const EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\n// const CLASS_NAME_OPEN = 'open'\n// const CLASS_NAME_CLOSE = 'collapse'\n// const CLASS_NAME_CLOSING = 'collapsing'\n// const CLASS_NAME_CLOSED = 'collapsed'\n// const CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_CLOSE} .${CLASS_NAME_CLOSING}`\n// const CLASS_NAME_HORIZONTAL = 'collapse-horizontal'\n\n// const SELECTOR_ACTIVES = '.open, .closing'\n\nclass Accordion extends BaseComponent {\n  static get NAME() {\n    return NAME\n  }\n\n  constructor(element, config) {\n    super(element, config)\n    // Store the <details> element\n    this._summary = element.querySelector('summary')\n    // Store the <div class=\"content\"> element\n    this._content = element.querySelector('.accordion-body')\n    // Store if the element is transitioning\n    this._isTransitioning = false\n    // Detect if the parent element is static\n    this._isStatic = this._element.parentElement.classList.contains('static')\n\n    // Replace the Proxy with a MutationObserver to watch for changes to the `open` attribute\n    const observer = new MutationObserver(mutationsList => {\n      for (const mutation of mutationsList) {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'open') {\n          if (this._element.open) {\n            this.open()\n          } else {\n            this.close()\n          }\n        }\n      }\n    })\n\n    observer.observe(this._element, { attributes: true })\n  }\n\n  open() {\n    if (this._isTransitioning) {\n      return\n    }\n\n    this._isTransitioning = true\n    this._element.style.height = `${this._summary.offsetHeight}px`\n    this._element.style.height = `${this._summary.offsetHeight + this._content.offsetHeight}px`\n    this._queueCallback(this.complete(true), this._element, true)\n  }\n\n  close() {\n    if (this._isTransitioning) {\n      return\n    }\n\n    this._isTransitioning = true\n    this._element.style.height = `${this._summary.offsetHeight + this._content.offsetHeight}px`\n    this._element.style.height = `${this._summary.offsetHeight}px`\n    this._queueCallback(this.complete(false), this._element, true)\n  }\n\n  complete = () => {\n    this._isTransitioning = false\n    this._content.style.height = ''\n  }\n}\n\nfor (const element of document.querySelectorAll('.accordion > details')) {\n  Accordion.getOrCreateInstance(element)\n}\n\nexport default Accordion\n"],"names":["NAME","Accordion","BaseComponent","constructor","element","config","complete","_isTransitioning","_content","style","height","_summary","querySelector","_isStatic","_element","parentElement","classList","contains","observer","MutationObserver","mutationsList","mutation","type","attributeName","open","close","observe","attributes","offsetHeight","_queueCallback","document","querySelectorAll","getOrCreateInstance"],"mappings":";;;;;;;;;;;EAAA;EACA;EACA;EACA;EACA;EACA;;EAGA;EACA;;EAEA,MAAMA,IAAI,GAAG,WAAW;EACxB;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA,MAAMC,SAAS,SAASC,aAAa,CAAC;IACpC,WAAWF,IAAIA,GAAG;EAChB,IAAA,OAAOA,IAAI;EACb;EAEAG,EAAAA,WAAWA,CAACC,OAAO,EAAEC,MAAM,EAAE;EAC3B,IAAA,KAAK,CAACD,OAAO,EAAEC,MAAM,CAAC;EACtB;MAAA,IA+CFC,CAAAA,QAAQ,GAAG,MAAM;QACf,IAAI,CAACC,gBAAgB,GAAG,KAAK;EAC7B,MAAA,IAAI,CAACC,QAAQ,CAACC,KAAK,CAACC,MAAM,GAAG,EAAE;OAChC;MAjDC,IAAI,CAACC,QAAQ,GAAGP,OAAO,CAACQ,aAAa,CAAC,SAAS,CAAC;EAChD;MACA,IAAI,CAACJ,QAAQ,GAAGJ,OAAO,CAACQ,aAAa,CAAC,iBAAiB,CAAC;EACxD;MACA,IAAI,CAACL,gBAAgB,GAAG,KAAK;EAC7B;EACA,IAAA,IAAI,CAACM,SAAS,GAAG,IAAI,CAACC,QAAQ,CAACC,aAAa,CAACC,SAAS,CAACC,QAAQ,CAAC,QAAQ,CAAC;;EAEzE;EACA,IAAA,MAAMC,QAAQ,GAAG,IAAIC,gBAAgB,CAACC,aAAa,IAAI;EACrD,MAAA,KAAK,MAAMC,QAAQ,IAAID,aAAa,EAAE;UACpC,IAAIC,QAAQ,CAACC,IAAI,KAAK,YAAY,IAAID,QAAQ,CAACE,aAAa,KAAK,MAAM,EAAE;EACvE,UAAA,IAAI,IAAI,CAACT,QAAQ,CAACU,IAAI,EAAE;cACtB,IAAI,CAACA,IAAI,EAAE;EACb,WAAC,MAAM;cACL,IAAI,CAACC,KAAK,EAAE;EACd;EACF;EACF;EACF,KAAC,CAAC;EAEFP,IAAAA,QAAQ,CAACQ,OAAO,CAAC,IAAI,CAACZ,QAAQ,EAAE;EAAEa,MAAAA,UAAU,EAAE;EAAK,KAAC,CAAC;EACvD;EAEAH,EAAAA,IAAIA,GAAG;MACL,IAAI,IAAI,CAACjB,gBAAgB,EAAE;EACzB,MAAA;EACF;MAEA,IAAI,CAACA,gBAAgB,GAAG,IAAI;EAC5B,IAAA,IAAI,CAACO,QAAQ,CAACL,KAAK,CAACC,MAAM,GAAG,CAAA,EAAG,IAAI,CAACC,QAAQ,CAACiB,YAAY,CAAI,EAAA,CAAA;EAC9D,IAAA,IAAI,CAACd,QAAQ,CAACL,KAAK,CAACC,MAAM,GAAG,CAAG,EAAA,IAAI,CAACC,QAAQ,CAACiB,YAAY,GAAG,IAAI,CAACpB,QAAQ,CAACoB,YAAY,CAAI,EAAA,CAAA;EAC3F,IAAA,IAAI,CAACC,cAAc,CAAC,IAAI,CAACvB,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,CAACQ,QAAQ,EAAE,IAAI,CAAC;EAC/D;EAEAW,EAAAA,KAAKA,GAAG;MACN,IAAI,IAAI,CAAClB,gBAAgB,EAAE;EACzB,MAAA;EACF;MAEA,IAAI,CAACA,gBAAgB,GAAG,IAAI;EAC5B,IAAA,IAAI,CAACO,QAAQ,CAACL,KAAK,CAACC,MAAM,GAAG,CAAG,EAAA,IAAI,CAACC,QAAQ,CAACiB,YAAY,GAAG,IAAI,CAACpB,QAAQ,CAACoB,YAAY,CAAI,EAAA,CAAA;EAC3F,IAAA,IAAI,CAACd,QAAQ,CAACL,KAAK,CAACC,MAAM,GAAG,CAAA,EAAG,IAAI,CAACC,QAAQ,CAACiB,YAAY,CAAI,EAAA,CAAA;EAC9D,IAAA,IAAI,CAACC,cAAc,CAAC,IAAI,CAACvB,QAAQ,CAAC,KAAK,CAAC,EAAE,IAAI,CAACQ,QAAQ,EAAE,IAAI,CAAC;EAChE;EAMF;EAEA,KAAK,MAAMV,OAAO,IAAI0B,QAAQ,CAACC,gBAAgB,CAAC,sBAAsB,CAAC,EAAE;EACvE9B,EAAAA,SAAS,CAAC+B,mBAAmB,CAAC5B,OAAO,CAAC;EACxC;;;;;;;;"}